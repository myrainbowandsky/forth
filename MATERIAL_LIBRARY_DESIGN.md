# ç´ æåº“åŠŸèƒ½è®¾è®¡æ–‡æ¡£

## ğŸ“‹ ç›®å½•
1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
3. [æ•°æ®æµç¨‹](#æ•°æ®æµç¨‹)
4. [UIè®¾è®¡](#uiè®¾è®¡)
5. [APIè®¾è®¡](#apiè®¾è®¡)
6. [ç»„ä»¶è®¾è®¡](#ç»„ä»¶è®¾è®¡)
7. [å®ç°è®¡åˆ’](#å®ç°è®¡åˆ’)

---

## æ¦‚è¿°

### ç›®æ ‡
åœ¨å†…å®¹åˆ›ä½œé¡µé¢å¢åŠ "å¼•ç”¨ç´ æåº“"åŠŸèƒ½,å…è®¸ç”¨æˆ·å¼•ç”¨ä¹‹å‰é‡‡é›†çš„å°çº¢ä¹¦ç¬”è®°å’Œå…¬ä¼—å·æ–‡ç« ä½œä¸ºåˆ›ä½œå‚è€ƒã€‚

### æ ¸å¿ƒä»·å€¼
- æé«˜åˆ›ä½œæ•ˆç‡ï¼šå¿«é€ŸæŸ¥æ‰¾å’Œå¼•ç”¨å†å²ç´ æ
- æå‡å†…å®¹è´¨é‡ï¼šåŸºäºçœŸå®æ•°æ®å’ŒæˆåŠŸæ¡ˆä¾‹åˆ›ä½œ
- çŸ¥è¯†å¤ç”¨ï¼šå……åˆ†åˆ©ç”¨å·²é‡‡é›†çš„æ•°æ®èµ„äº§

---

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯åº”ç”¨å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ é€‰é¢˜åˆ†æé¡µé¢  â”‚  â”‚ å†…å®¹åˆ›ä½œé¡µé¢  â”‚  â”‚ å‘å¸ƒç®¡ç†é¡µé¢  â”‚         â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚         â”‚
â”‚  â”‚ - é‡‡é›†æ•°æ®    â”‚  â”‚ - é€‰æ‹©é€‰é¢˜    â”‚  â”‚ - æ–‡ç« å‘å¸ƒ    â”‚         â”‚
â”‚  â”‚ - AIæ´å¯Ÿ     â”‚  â”‚ - ç´ æåº“ â˜…   â”‚  â”‚ - å¹³å°ç®¡ç†    â”‚         â”‚
â”‚  â”‚ - ä¿å­˜å†å²    â”‚  â”‚ - ç”Ÿæˆæ–‡ç«     â”‚  â”‚              â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                 â”‚                                    â”‚
â”‚         â†“                 â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚         æ–°å¢ï¼šç´ æåº“ç»„ä»¶                 â”‚                   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
â”‚  â”‚  MaterialLibrary                       â”‚                   â”‚
â”‚  â”‚  â”œâ”€â”€ MaterialFilter (ç­›é€‰å™¨)            â”‚                   â”‚
â”‚  â”‚  â”œâ”€â”€ MaterialList (ç´ æåˆ—è¡¨)            â”‚                   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ MaterialCard (ç´ æå¡ç‰‡)        â”‚                   â”‚
â”‚  â”‚  â”œâ”€â”€ MaterialDetailModal (è¯¦æƒ…å¼¹çª—)     â”‚                   â”‚
â”‚  â”‚  â””â”€â”€ SelectedMaterialsBar (å·²é€‰ç´ ææ )  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         API å±‚                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ ç°æœ‰ API          â”‚  â”‚ æ–°å¢ API â˜…        â”‚                   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
â”‚  â”‚ /api/history     â”‚  â”‚ /api/materials   â”‚ â† è·å–ç´ æåˆ—è¡¨     â”‚
â”‚  â”‚ /api/ai-insights â”‚  â”‚   - GET          â”‚                   â”‚
â”‚  â”‚ /api/generate-   â”‚  â”‚   - æ”¯æŒç­›é€‰      â”‚                   â”‚
â”‚  â”‚   article        â”‚  â”‚   - æ”¯æŒåˆ†é¡µ      â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   - æ”¯æŒæœç´¢      â”‚                   â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ ä¿®æ”¹ï¼š/api/generate-article           â”‚                     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
â”‚  â”‚ æ–°å¢å‚æ•°: referenceMaterials[]        â”‚                     â”‚
â”‚  â”‚ - å°†é€‰ä¸­çš„ç´ æä¼ é€’ç»™ AI                â”‚                     â”‚
â”‚  â”‚ - AI åŸºäºç´ æç”Ÿæˆæ›´ä¼˜è´¨çš„å†…å®¹           â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å±‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  SQLite æ•°æ®åº“ (data/app.db)                 â”‚               â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
â”‚  â”‚                                             â”‚               â”‚
â”‚  â”‚  search_history è¡¨                          â”‚               â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚               â”‚
â”‚  â”‚  â”‚ id                (ä¸»é”®)            â”‚    â”‚               â”‚
â”‚  â”‚  â”‚ keyword           (æœç´¢å…³é”®è¯)       â”‚    â”‚               â”‚
â”‚  â”‚  â”‚ platform          (å¹³å°ç±»å‹)         â”‚    â”‚               â”‚
â”‚  â”‚  â”‚ timestamp         (æ—¶é—´æˆ³)          â”‚    â”‚               â”‚
â”‚  â”‚  â”‚ result_count      (ç»“æœæ•°é‡)         â”‚    â”‚               â”‚
â”‚  â”‚  â”‚ articles_data     (æ–‡ç« /ç¬”è®°æ•°æ®)â˜…   â”‚    â”‚               â”‚
â”‚  â”‚  â”‚ api_response      (APIå“åº”)         â”‚    â”‚               â”‚
â”‚  â”‚  â”‚ ai_insights       (AIæ´å¯Ÿ)          â”‚    â”‚               â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚               â”‚
â”‚  â”‚                                             â”‚               â”‚
â”‚  â”‚  ç´ ææ¥æºï¼šarticles_data å­—æ®µ                â”‚               â”‚
â”‚  â”‚  - å…¬ä¼—å·: WeChatArticle[]                  â”‚               â”‚
â”‚  â”‚  - å°çº¢ä¹¦: XiaohongshuNote[]                â”‚               â”‚
â”‚  â”‚                                             â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ•°æ®æµç¨‹

### 1. ç´ æé‡‡é›†æµç¨‹ï¼ˆå·²æœ‰ï¼‰

```
ç”¨æˆ·åœ¨"é€‰é¢˜åˆ†æ"é¡µé¢
    â†“
è¾“å…¥å…³é”®è¯ï¼Œé€‰æ‹©å¹³å°ï¼ˆå…¬ä¼—å·/å°çº¢ä¹¦ï¼‰
    â†“
è°ƒç”¨é‡‡é›† API
    â”œâ”€â†’ å…¬ä¼—å·: searchWeChatArticles()
    â””â”€â†’ å°çº¢ä¹¦: searchXiaohongshuNotes() + fetchNotesWithDetails()
    â†“
è·å–æ–‡ç« /ç¬”è®°æ•°æ®
    â”œâ”€â†’ å…¬ä¼—å·: { title, content, read, praise, url, ... }
    â””â”€â†’ å°çº¢ä¹¦: { id, title, content, cover, liked_count, ... }
    â†“
è°ƒç”¨ AI ç”Ÿæˆæ´å¯Ÿ
    â†“
ä¿å­˜åˆ° search_history è¡¨
    â”œâ”€â†’ keyword: "ç§åŸŸæµé‡"
    â”œâ”€â†’ platform: "wechat"
    â”œâ”€â†’ articles_data: [æ–‡ç« 1, æ–‡ç« 2, ...] â˜… ç´ ææ¥æº
    â”œâ”€â†’ api_response: {...}
    â””â”€â†’ ai_insights: {...}
```

### 2. ç´ æä½¿ç”¨æµç¨‹ï¼ˆæ–°å¢ï¼‰

```
ç”¨æˆ·åœ¨"å†…å®¹åˆ›ä½œ"é¡µé¢
    â†“
æ‰“å¼€å³ä¾§"ç´ æåº“"é¢æ¿
    â†“
è°ƒç”¨ GET /api/materials
    â”œâ”€â†’ ä» search_history è¯»å–æ‰€æœ‰å†å²è®°å½•
    â”œâ”€â†’ éå† articles_data æå–ç´ æ
    â”œâ”€â†’ èšåˆå¹¶æ ¼å¼åŒ–æ•°æ®
    â””â”€â†’ è¿”å›ç´ æåˆ—è¡¨
    â†“
å±•ç¤ºç´ æåˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ã€æœç´¢ã€æ’åºï¼‰
    â”œâ”€â†’ å¹³å°ç­›é€‰: å…¬ä¼—å· | å°çº¢ä¹¦ | å…¨éƒ¨
    â”œâ”€â†’ æœç´¢: æ ‡é¢˜ã€å†…å®¹å…³é”®è¯
    â”œâ”€â†’ æ’åº: æ—¶é—´ | ç‚¹èµæ•° | é˜…è¯»æ•°
    â””â”€â†’ åˆ†é¡µ: æ¯é¡µ 20-50 æ¡
    â†“
ç”¨æˆ·æµè§ˆç´ æå¡ç‰‡
    â”œâ”€â†’ æŸ¥çœ‹ï¼šæ ‡é¢˜ã€å°é¢ã€æ•°æ®æŒ‡æ ‡
    â”œâ”€â†’ ç‚¹å‡»"è¯¦æƒ…"ï¼šæŸ¥çœ‹å®Œæ•´å†…å®¹
    â””â”€â†’ å‹¾é€‰ï¼šå¤šé€‰å‚è€ƒç´ æï¼ˆå»ºè®® 2-5 ä¸ªï¼‰
    â†“
ç‚¹å‡»"åº”ç”¨åˆ°åˆ›ä½œ"
    â†“
é€‰ä¸­çš„ç´ ææ·»åŠ åˆ°åˆ›ä½œä¸Šä¸‹æ–‡
    â†“
ç”¨æˆ·è®¾ç½®é€‰é¢˜ + åˆ›ä½œå‚æ•°
    â†“
ç‚¹å‡»"å¼€å§‹åˆ›ä½œ"
    â†“
è°ƒç”¨ POST /api/generate-article
    â”œâ”€â†’ topic: {...}
    â”œâ”€â†’ params: {...}
    â””â”€â†’ referenceMaterials: [ç´ æ1, ç´ æ2, ...] â˜… æ–°å¢
    â†“
AI ç”Ÿæˆæ–‡ç« 
    â”œâ”€â†’ åˆ†æé€‰é¢˜æ–¹å‘
    â”œâ”€â†’ å‚è€ƒç´ æçš„ï¼š
    â”‚   â”œâ”€ å†™ä½œé£æ ¼
    â”‚   â”œâ”€ å†…å®¹ç»“æ„
    â”‚   â”œâ”€ æ•°æ®å¼•ç”¨
    â”‚   â””â”€ è§‚ç‚¹è®ºè¯
    â””â”€â†’ ç”ŸæˆåŸåˆ›å†…å®¹ï¼ˆé¿å…æŠ„è¢­ï¼‰
    â†“
è¿”å›ç”Ÿæˆçš„æ–‡ç« 
```

---

## UIè®¾è®¡

### 1. é¡µé¢å¸ƒå±€

#### å†…å®¹åˆ›ä½œé¡µé¢ï¼ˆä¿®æ”¹åï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å†…å®¹åˆ›ä½œ                                                            â”‚
â”‚  åŸºäºAIæ™ºèƒ½ç”Ÿæˆé«˜è´¨é‡æ–‡ç« ï¼Œè‡ªåŠ¨é…å›¾ï¼Œä¸€é”®å‘å¸ƒ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚                          â”‚                         â”‚
â”‚  å·¦ä¾§æ       â”‚     ä¸­é—´é¢„è§ˆåŒº             â”‚    å³ä¾§ç´ æåº“ â˜…         â”‚
â”‚  (åŸæœ‰)      â”‚     (åŸæœ‰)                â”‚    (æ–°å¢)               â”‚
â”‚              â”‚                          â”‚                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚é€‰é¢˜æ¥æº   â”‚â”‚ â”‚                      â”‚ â”‚ â”‚ ç´ æåº“              â”‚ â”‚
â”‚ â”‚          â”‚â”‚ â”‚   ç”Ÿæˆçš„æ–‡ç« é¢„è§ˆ        â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚â—‹ æ´å¯ŸæŠ¥å‘Š â”‚â”‚ â”‚                      â”‚ â”‚ â”‚ ç­›é€‰å™¨              â”‚ â”‚
â”‚ â”‚â—‹ è‡ªå®šä¹‰  â”‚â”‚ â”‚   [æ ‡é¢˜]             â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚ å¹³å°: [å…¨éƒ¨â–¼]   â”‚ â”‚ â”‚
â”‚             â”‚ â”‚   [æ­£æ–‡å†…å®¹...]       â”‚ â”‚ â”‚ â”‚ æœç´¢: [______]  â”‚ â”‚ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚ æ’åº: [æ—¶é—´â–¼]   â”‚ â”‚ â”‚
â”‚ â”‚åˆ›ä½œå‚æ•°   â”‚â”‚ â”‚   [å›¾ç‰‡]             â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚          â”‚â”‚ â”‚                      â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚æ–‡ç« é•¿åº¦   â”‚â”‚ â”‚   ...                â”‚ â”‚ â”‚ ç´ æåˆ—è¡¨ (å·²é€‰ 3)   â”‚ â”‚
â”‚ â”‚å†™ä½œé£æ ¼   â”‚â”‚ â”‚                      â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚å›¾ç‰‡æ•°é‡   â”‚â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚ â˜‘ [å°é¢]        â”‚ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚   ç§åŸŸè¿è¥æŒ‡å—   â”‚ â”‚ â”‚
â”‚             â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚   ğŸ“±å…¬ä¼—å·       â”‚ â”‚ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚   ğŸ‘2.3k ğŸ’¬89   â”‚ â”‚ â”‚
â”‚ â”‚[å¼€å§‹åˆ›ä½œ] â”‚â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚   [è¯¦æƒ…]        â”‚ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚                      â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚             â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚ â˜ [å°é¢]        â”‚ â”‚ â”‚
â”‚             â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚   å°çº¢ä¹¦è¿è¥æŠ€å·§ â”‚ â”‚ â”‚
â”‚             â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚   ğŸ”´å°çº¢ä¹¦       â”‚ â”‚ â”‚
â”‚             â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚   â¤1.5k ğŸ’¬156   â”‚ â”‚ â”‚
â”‚             â”‚ â”‚                      â”‚ â”‚ â”‚ â”‚   [è¯¦æƒ…]        â”‚ â”‚ â”‚
â”‚             â”‚ â”‚                      â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚             â”‚ â”‚                      â”‚ â”‚ â”‚   ...æ›´å¤šç´ æ...    â”‚ â”‚ â”‚
â”‚             â”‚ â”‚                      â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚             â”‚ â”‚                      â”‚ â”‚ â”‚ [æ¸…ç©º] [åº”ç”¨åˆ°åˆ›ä½œ]  â”‚ â”‚ â”‚
â”‚             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â”‚                          â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ç´ æå¡ç‰‡è®¾è®¡

#### å…¬ä¼—å·æ–‡ç« å¡ç‰‡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘                                           â”‚
â”‚   å¦‚ä½•æ­å»ºç§åŸŸæµé‡è¿è¥ä½“ç³»                     â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚   ğŸ“± å…¬ä¼—å· | æ¥æº: ç§åŸŸè¿è¥                   â”‚
â”‚   ğŸ‘ 15,234 é˜…è¯» | ğŸ’– 2,345 ç‚¹èµ | ğŸ’¬ 89 è¯„è®º  â”‚
â”‚   â° 2024-01-15                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚   [æŸ¥çœ‹è¯¦æƒ…]                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å°çº¢ä¹¦ç¬”è®°å¡ç‰‡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜  [å°é¢å›¾]                                  â”‚
â”‚                                             â”‚
â”‚    ç¾å¦†æ–°æ‰‹å¿…çœ‹ï¼åº•å¦†æ•™ç¨‹                      â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚    ğŸ”´ å°çº¢ä¹¦ | æ¥æº: ç¾å¦†æ•™ç¨‹                  â”‚
â”‚    â¤ 8,567 ç‚¹èµ | â­ 1,234 æ”¶è— | ğŸ’¬ 456 è¯„è®º â”‚
â”‚    â° 2024-01-15                             â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚    [æŸ¥çœ‹è¯¦æƒ…]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ç´ æè¯¦æƒ…å¼¹çª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬”è®°è¯¦æƒ…                                      [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  ç¾å¦†æ–°æ‰‹å¿…çœ‹ï¼åº•å¦†æ•™ç¨‹                              â”‚
â”‚  ğŸ”´ å°çº¢ä¹¦ | å›¾æ–‡ç¬”è®°                                â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â”‚            [å°é¢å›¾ç‰‡]                         â”‚   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  ä½œè€…: @ç¾å¦†å°è¾¾äºº                                   â”‚
â”‚  å¤´åƒ: [å¤´åƒ]                                        â”‚
â”‚                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  ç¬”è®°æ­£æ–‡:                                           â”‚
â”‚  å¤§å®¶å¥½ï¼ä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘çš„åº•å¦†æ­¥éª¤...             â”‚
â”‚  1. å¦†å‰æŠ¤è‚¤...                                      â”‚
â”‚  2. å¦†å‰ä¹³...                                        â”‚
â”‚  ...                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                     â”‚
â”‚  äº’åŠ¨æ•°æ®:                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ç‚¹èµ  â”‚ â”‚ æ”¶è—  â”‚ â”‚ è¯„è®º  â”‚ â”‚ åˆ†äº«  â”‚            â”‚
â”‚  â”‚ 8.5k â”‚ â”‚ 1.2k â”‚ â”‚ 456  â”‚ â”‚ 89   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                     â”‚
â”‚  [åœ¨å°çº¢ä¹¦ä¸­æŸ¥çœ‹] [å…³é—­]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## APIè®¾è®¡

### 1. è·å–ç´ æåˆ—è¡¨ API

**ç«¯ç‚¹**: `GET /api/materials`

**è¯·æ±‚å‚æ•°**:
```typescript
{
  platform?: 'wechat' | 'xiaohongshu' | 'all',  // å¹³å°ç­›é€‰ï¼Œé»˜è®¤ 'all'
  keyword?: string,                              // æœç´¢å…³é”®è¯
  searchIn?: 'title' | 'content' | 'both',       // æœç´¢èŒƒå›´ï¼Œé»˜è®¤ 'both'
  sortBy?: 'timestamp' | 'likes' | 'reads',      // æ’åºå­—æ®µï¼Œé»˜è®¤ 'timestamp'
  order?: 'asc' | 'desc',                        // æ’åºæ–¹å‘ï¼Œé»˜è®¤ 'desc'
  limit?: number,                                // æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 50
  offset?: number                                // åç§»é‡ï¼Œé»˜è®¤ 0
}
```

**å“åº”æ•°æ®**:
```typescript
{
  success: boolean,
  data: {
    materials: Material[],
    total: number,
    hasMore: boolean
  },
  error?: string
}

interface Material {
  id: string,                    // å”¯ä¸€æ ‡è¯†: `${platform}-${historyId}-${index}`
  type: 'wechat' | 'xiaohongshu',
  title: string,
  content: string,
  cover?: string,                // å°çº¢ä¹¦ç¬”è®°å°é¢
  url?: string,                  // æ–‡ç« /ç¬”è®°é“¾æ¥
  metrics: {
    likes: number,
    reads: number,
    comments?: number,
    shares?: number
  },
  source: string,                // æ¥æºå…³é”®è¯
  timestamp: number,             // é‡‡é›†æ—¶é—´æˆ³
  author?: {                     // ä½œè€…ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
    name: string,
    avatar?: string
  }
}
```

**å®ç°é€»è¾‘**:
```typescript
// app/api/materials/route.ts
export async function GET(request: NextRequest) {
  // 1. è§£ææŸ¥è¯¢å‚æ•°
  const searchParams = new URL(request.url).searchParams
  const platform = searchParams.get('platform') || 'all'
  const keyword = searchParams.get('keyword') || ''
  const sortBy = searchParams.get('sortBy') || 'timestamp'
  const limit = parseInt(searchParams.get('limit') || '50')
  const offset = parseInt(searchParams.get('offset') || '0')

  // 2. ä»æ•°æ®åº“è¯»å– search_history
  const db = getDb()
  let query = 'SELECT * FROM search_history WHERE 1=1'
  const params: any[] = []

  if (platform !== 'all') {
    query += ' AND platform = ?'
    params.push(platform)
  }

  query += ' ORDER BY timestamp DESC'

  const histories = db.prepare(query).all(...params)

  // 3. æå–å¹¶èšåˆç´ æ
  const materials: Material[] = []

  for (const history of histories) {
    if (!history.articles_data) continue

    const articlesData = JSON.parse(history.articles_data)

    if (history.platform === 'wechat') {
      articlesData.forEach((article: any, index: number) => {
        materials.push({
          id: `wechat-${history.id}-${index}`,
          type: 'wechat',
          title: article.title,
          content: article.content || '',
          url: article.url || article.short_link,
          metrics: {
            likes: article.praise || 0,
            reads: article.read || 0
          },
          source: history.keyword,
          timestamp: history.timestamp
        })
      })
    } else if (history.platform === 'xiaohongshu') {
      articlesData.forEach((note: any, index: number) => {
        materials.push({
          id: `xhs-${history.id}-${index}`,
          type: 'xiaohongshu',
          title: note.title,
          content: note.content || '',
          cover: note.cover,
          url: `https://www.xiaohongshu.com/explore/${note.id}`,
          metrics: {
            likes: note.liked_count || 0,
            reads: note.collected_count || 0,
            comments: note.comment_count || 0,
            shares: note.shared_count || 0
          },
          source: history.keyword,
          timestamp: history.timestamp,
          author: {
            name: note.user_name,
            avatar: note.user_avatar
          }
        })
      })
    }
  }

  // 4. ç­›é€‰ï¼ˆå…³é”®è¯æœç´¢ï¼‰
  let filteredMaterials = materials
  if (keyword) {
    filteredMaterials = materials.filter(m =>
      m.title.includes(keyword) || m.content.includes(keyword)
    )
  }

  // 5. æ’åº
  filteredMaterials.sort((a, b) => {
    if (sortBy === 'timestamp') {
      return b.timestamp - a.timestamp
    } else if (sortBy === 'likes') {
      return b.metrics.likes - a.metrics.likes
    } else if (sortBy === 'reads') {
      return b.metrics.reads - a.metrics.reads
    }
    return 0
  })

  // 6. åˆ†é¡µ
  const paginatedMaterials = filteredMaterials.slice(offset, offset + limit)

  return NextResponse.json({
    success: true,
    data: {
      materials: paginatedMaterials,
      total: filteredMaterials.length,
      hasMore: offset + limit < filteredMaterials.length
    }
  })
}
```

### 2. ä¿®æ”¹æ–‡ç« ç”Ÿæˆ API

**ç«¯ç‚¹**: `POST /api/generate-article`

**è¯·æ±‚ä½“ï¼ˆæ–°å¢å­—æ®µï¼‰**:
```typescript
{
  topic: Topic,
  params: {
    length: string,
    style: string,
    imageCount: number,
    platform?: 'wechat' | 'xiaohongshu'
  },
  referenceMaterials?: Material[]  // â˜… æ–°å¢ï¼šå‚è€ƒç´ æ
}
```

**AI Prompt ä¼˜åŒ–**:
```typescript
// åœ¨ç”Ÿæˆæ–‡ç« æ—¶ï¼Œå°†å‚è€ƒç´ æèå…¥ Prompt
const systemPrompt = `ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å†…å®¹åˆ›ä½œè€…ã€‚`

const userPrompt = `
é€‰é¢˜ä¿¡æ¯ï¼š
- æ ‡é¢˜ï¼š${topic.title}
- æè¿°ï¼š${topic.description}
- å»ºè®®ï¼š${topic.creativeAdvice || 'æ— '}

${referenceMaterials && referenceMaterials.length > 0 ? `
å‚è€ƒç´ æï¼ˆè¯·å€Ÿé‰´ä»¥ä¸‹ç´ æçš„é£æ ¼ã€ç»“æ„å’Œè§‚ç‚¹ï¼Œä½†å¿…é¡»åˆ›ä½œåŸåˆ›å†…å®¹ï¼Œé¿å…æŠ„è¢­ï¼‰ï¼š

${referenceMaterials.map((material, index) => `
${index + 1}. ã€Š${material.title}ã€‹
   - å¹³å°ï¼š${material.type === 'wechat' ? 'å…¬ä¼—å·' : 'å°çº¢ä¹¦'}
   - æ•°æ®ï¼šğŸ‘ ${material.metrics.reads} é˜…è¯»ï¼ŒğŸ’– ${material.metrics.likes} ç‚¹èµ
   - å†…å®¹æ‘˜è¦ï¼š${material.content.substring(0, 200)}...
`).join('\n')}
` : ''}

è¯·åŸºäºä»¥ä¸Šé€‰é¢˜å’Œå‚è€ƒç´ æï¼Œåˆ›ä½œä¸€ç¯‡ï¼š
- é•¿åº¦ï¼š${params.length} å­—
- é£æ ¼ï¼š${params.style}
- æ’å…¥å›¾ç‰‡æ•°é‡ï¼š${params.imageCount}
- ç›®æ ‡å¹³å°ï¼š${params.platform || 'wechat'}

è¦æ±‚ï¼š
1. å†…å®¹å¿…é¡»åŸåˆ›ï¼Œä¸èƒ½ç›´æ¥å¤åˆ¶å‚è€ƒç´ æ
2. å¯ä»¥å€Ÿé‰´å‚è€ƒç´ æçš„å†™ä½œé£æ ¼å’Œç»“æ„
3. å¯ä»¥å¼•ç”¨å‚è€ƒç´ æä¸­çš„æ•°æ®å’Œè§‚ç‚¹ï¼ˆéœ€æ³¨æ˜æ¥æºï¼‰
4. ç¡®ä¿å†…å®¹æœ‰ä»·å€¼ã€æœ‰æ·±åº¦ã€æ˜“è¯»æ€§å¼º
`
```

---

## ç»„ä»¶è®¾è®¡

### 1. MaterialLibrary ç»„ä»¶

**ä½ç½®**: `components/MaterialLibrary.tsx`

**èŒè´£**:
- ç®¡ç†ç´ æåº“çš„æ•´ä½“çŠ¶æ€
- åè°ƒå­ç»„ä»¶
- æä¾›ç´ æé€‰æ‹©æ¥å£

**Props**:
```typescript
interface MaterialLibraryProps {
  onMaterialsSelected: (materials: Material[]) => void  // ç´ æé€‰æ‹©å›è°ƒ
  maxSelection?: number                                 // æœ€å¤§é€‰æ‹©æ•°é‡ï¼Œé»˜è®¤ 10
}
```

**State**:
```typescript
{
  materials: Material[],           // ç´ æåˆ—è¡¨
  selectedMaterials: Material[],   // å·²é€‰ç´ æ
  filters: {
    platform: 'all' | 'wechat' | 'xiaohongshu',
    keyword: string,
    sortBy: 'timestamp' | 'likes' | 'reads'
  },
  loading: boolean,
  error: string | null
}
```

### 2. MaterialFilter ç»„ä»¶

**ä½ç½®**: `components/MaterialFilter.tsx`

**èŒè´£**: æä¾›ç­›é€‰å’Œæœç´¢åŠŸèƒ½

**Props**:
```typescript
interface MaterialFilterProps {
  filters: FilterState,
  onFilterChange: (filters: FilterState) => void
}
```

### 3. MaterialCard ç»„ä»¶

**ä½ç½®**: `components/MaterialCard.tsx`

**èŒè´£**: å±•ç¤ºå•ä¸ªç´ æå¡ç‰‡

**Props**:
```typescript
interface MaterialCardProps {
  material: Material,
  selected: boolean,
  onSelect: (material: Material) => void,
  onViewDetail: (material: Material) => void
}
```

### 4. MaterialDetailModal ç»„ä»¶

**ä½ç½®**: `components/MaterialDetailModal.tsx`

**èŒè´£**: å±•ç¤ºç´ æè¯¦æƒ…å¼¹çª—

**Props**:
```typescript
interface MaterialDetailModalProps {
  material: Material | null,
  isOpen: boolean,
  onClose: () => void
}
```

---

## å®ç°è®¡åˆ’

### Phase 1: åŸºç¡€åŠŸèƒ½ (3-5å¤©)

**ç›®æ ‡**: MVP å¯ç”¨

**ä»»åŠ¡**:
1. âœ… åˆ›å»º `/api/materials` API
   - ä» search_history è¯»å–æ•°æ®
   - èšåˆç´ æåˆ—è¡¨
   - æ”¯æŒåŸºç¡€ç­›é€‰

2. âœ… åˆ›å»ºç´ æåº“ç»„ä»¶
   - MaterialLibrary ä¸»ç»„ä»¶
   - MaterialCard å¡ç‰‡ç»„ä»¶
   - åŸºç¡€æ ·å¼

3. âœ… é›†æˆåˆ°åˆ›ä½œé¡µé¢
   - æ·»åŠ ç´ æåº“é¢æ¿
   - å®ç°ç´ æé€‰æ‹©åŠŸèƒ½
   - ä¼ é€’ç´ æåˆ°ç”Ÿæˆ API

4. âœ… ä¿®æ”¹æ–‡ç« ç”Ÿæˆ API
   - æ¥æ”¶ referenceMaterials å‚æ•°
   - ä¼˜åŒ– AI Prompt
   - æµ‹è¯•ç”Ÿæˆè´¨é‡

### Phase 2: å¢å¼ºåŠŸèƒ½ (3-5å¤©)

**ç›®æ ‡**: å®Œå–„ç”¨æˆ·ä½“éªŒ

**ä»»åŠ¡**:
1. âœ… é«˜çº§ç­›é€‰å’Œæœç´¢
   - å¹³å°ç­›é€‰
   - å…³é”®è¯æœç´¢
   - å¤šç»´åº¦æ’åº

2. âœ… ç´ æè¯¦æƒ…å¼¹çª—
   - å®Œæ•´å†…å®¹å±•ç¤º
   - äº’åŠ¨æ•°æ®å¯è§†åŒ–
   - å¿«æ·æ“ä½œ

3. âœ… ç”¨æˆ·ä½“éªŒä¼˜åŒ–
   - åŠ è½½çŠ¶æ€
   - é”™è¯¯æç¤º
   - ç©ºçŠ¶æ€å±•ç¤º

### Phase 3: æ€§èƒ½ä¼˜åŒ– (2-3å¤©)

**ç›®æ ‡**: æå‡æ€§èƒ½å’Œç¨³å®šæ€§

**ä»»åŠ¡**:
1. âœ… è™šæ‹Ÿæ»šåŠ¨
   - ä½¿ç”¨ react-window
   - ä¼˜åŒ–å¤§é‡æ•°æ®æ¸²æŸ“

2. âœ… æ•°æ®ç¼“å­˜
   - ä½¿ç”¨ React Query
   - ä¼˜åŒ– API è°ƒç”¨

3. âœ… å›¾ç‰‡ä¼˜åŒ–
   - æ‡’åŠ è½½
   - å ä½ç¬¦
   - é”™è¯¯å¤„ç†

### Phase 4: è¿›é˜¶åŠŸèƒ½ (å¯é€‰)

**ä»»åŠ¡**:
1. ç´ ææ”¶è—å’Œæ ‡ç­¾
2. ç´ æå¯¼å‡ºåŠŸèƒ½
3. ç§»åŠ¨ç«¯é€‚é…
4. æ‰¹é‡æ“ä½œ

---

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Next.js 14 + React 18
- **æ ·å¼**: Tailwind CSS
- **çŠ¶æ€ç®¡ç†**: React Hooks
- **æ•°æ®è¯·æ±‚**: fetch API (å¯å‡çº§ä¸º React Query)
- **è™šæ‹Ÿæ»šåŠ¨**: react-window
- **æ•°æ®åº“**: SQLite (better-sqlite3)
- **AI**: OpenAI API

---

## æ€»ç»“

æœ¬è®¾è®¡æ–¹æ¡ˆæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ç´ æåº“åŠŸèƒ½å®ç°è·¯å¾„ï¼ŒåŒ…æ‹¬ï¼š

1. **æ¸…æ™°çš„æ¶æ„è®¾è®¡** - åˆ†å±‚æ˜ç¡®ï¼ŒèŒè´£æ¸…æ™°
2. **è¯¦ç»†çš„æ•°æ®æµç¨‹** - ä»é‡‡é›†åˆ°ä½¿ç”¨çš„å®Œæ•´é“¾è·¯
3. **ç›´è§‚çš„UIè®¾è®¡** - ç”¨æˆ·å‹å¥½çš„äº¤äº’ä½“éªŒ
4. **å¥å£®çš„APIè®¾è®¡** - æ”¯æŒç­›é€‰ã€æœç´¢ã€åˆ†é¡µ
5. **æ¨¡å—åŒ–çš„ç»„ä»¶è®¾è®¡** - å¯å¤ç”¨ã€å¯ç»´æŠ¤
6. **åˆ†é˜¶æ®µçš„å®ç°è®¡åˆ’** - å¾ªåºæ¸è¿›ï¼Œå¯æ§è¿­ä»£

é€šè¿‡è¿™ä¸ªè®¾è®¡ï¼Œç”¨æˆ·å¯ä»¥é«˜æ•ˆåœ°å¼•ç”¨å†å²ç´ æï¼Œæå‡å†…å®¹åˆ›ä½œçš„è´¨é‡å’Œæ•ˆç‡ã€‚
